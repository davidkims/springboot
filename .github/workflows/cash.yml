name: ğŸ§¾ ê²°ì œ ìë™í™” - PDF ì˜ìˆ˜ì¦ í¬í•¨

on:
  workflow_dispatch:
  push:
    branches: ["main"]

jobs:
  compose-ledger:
    runs-on: ubuntu-latest

    steps:
      - name: íŒŒì¼ ì €ì¥ì†Œ ì²´í¬ì™€ì›Œ
        uses: actions/checkout@v4

      - name: íŒŒì¼ ìƒì„± - Dummy ëª©ë¡ echo ê¸°ëŠ¥ í¬í•¨
        run: |
          mkdir -p output/receipts
          touch output/receipts/dummy.pdf
          echo "PDF dummy íŒŒì¼ ìƒì„± ì™„ë£Œ"

      - name: ì‹œê°„ ëŒ€ê¸° ë° PDF í™•ì¸
        run: |
          sleep 5
          echo "PDF íŒŒì¼ ëª©ë¡:"
          find output/receipts -name '*.pdf' || echo "âŒ PDF íŒŒì¼ ì—†ìŒ"

      - name: ğŸ“¤ ê±°ë˜ CSV ì—…ë¡œë“œ
        uses: actions/upload-artifact@v4
        with:
          name: ê±°ë˜ë°ì´í„°
          path: output/transactions.csv

      - name: ğŸ“¤ ì˜ìˆ˜ì¦ TXT ì—…ë¡œë“œ
        uses: actions/upload-artifact@v4
        with:
          name: ì˜ìˆ˜ì¦_í…ìŠ¤íŠ¸
          path: output/receipts/*.txt

      - name: ğŸ“¤ ì˜ìˆ˜ì¦ PDF ì—…ë¡œë“œ
        uses: actions/upload-artifact@v4
        with:
          name: ì˜ìˆ˜ì¦_PDF
          path: output/receipts/*.pdf
          if-no-files-found: warn
          compression-level: 6
          overwrite: false
          include-hidden-files: false
